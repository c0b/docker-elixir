FROM erlang:20.0-alpine

# elixir expects utf8.
ENV ELIXIR_VERSION="v1.4.5" \
  LANG=C.UTF-8

RUN set -xe \
  && ELIXIR_DOWNLOAD_URL="https://github.com/elixir-lang/elixir/releases/download/${ELIXIR_VERSION}/Precompiled.zip" \
  && ELIXIR_DOWNLOAD_SHA256="a740e634e3c68b1477e16d75a0fd400237a46c62ceb5d04551dbc46093a03f98"\
  && buildDeps=' \
    ca-certificates \
    curl \
    unzip \
  ' \
  && apk update \
  && apk --no-cache --update add $buildDeps \
  && curl -fSL -o elixir-precompiled.zip $ELIXIR_DOWNLOAD_URL \
  && echo "$ELIXIR_DOWNLOAD_SHA256  elixir-precompiled.zip" | sha256sum -c - \
  && unzip -d /usr/local elixir-precompiled.zip \
  && rm elixir-precompiled.zip \
  && apk del $buildDeps \
  && rm -rf /var/cache/apk/*

CMD ["iex"]
